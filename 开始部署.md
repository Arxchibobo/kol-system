# ğŸš€ å¼€å§‹éƒ¨ç½²åˆ° Google Cloud Run

## âœ… å·²å®Œæˆ

- âœ… ä»£ç å·²æ¨é€åˆ° GitHub
- âœ… æœ¬åœ°æµ‹è¯•é€šè¿‡
- âœ… Docker é…ç½®å®Œæˆ
- âœ… éƒ¨ç½²è„šæœ¬å·²å‡†å¤‡

---

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡ (10åˆ†é’Ÿ)

### 1ï¸âƒ£ å®‰è£… Google Cloud SDK

**Windows ç”¨æˆ·**:
1. ä¸‹è½½: https://cloud.google.com/sdk/docs/install#windows
2. ä¸‹è½½ `GoogleCloudSDKInstaller.exe`
3. è¿è¡Œå®‰è£…ç¨‹åº
4. é‡å¯ Git Bash æˆ–å‘½ä»¤æç¤ºç¬¦

**éªŒè¯å®‰è£…**:
```bash
gcloud --version
```

### 2ï¸âƒ£ é…ç½® GCP

å‚è€ƒè¯¦ç»†æŒ‡å—: `GCPå¿«é€Ÿé…ç½®.md`

**å¿«é€Ÿæ­¥éª¤**:
```bash
# 1. ç™»å½•
gcloud auth login

# 2. åˆ›å»ºé¡¹ç›® (é¡¹ç›®IDå¿…é¡»å…¨å±€å”¯ä¸€)
gcloud projects create myshell-kol-123456 --name="MyShell KOL System"

# 3. è®¾ç½®é¡¹ç›®
gcloud config set project myshell-kol-123456

# 4. å¯ç”¨ API
gcloud services enable run.googleapis.com
gcloud services enable cloudbuild.googleapis.com
gcloud services enable containerregistry.googleapis.com

# 5. è®¾ç½®åŒºåŸŸ
gcloud config set run/region asia-east1
```

---

## ğŸš€ ä¸€é”®éƒ¨ç½²

### Windows ç”¨æˆ·:

```bash
deploy-cloudrun.bat
```

### Linux/Mac ç”¨æˆ·:

```bash
chmod +x deploy-cloudrun.sh
./deploy-cloudrun.sh
```

---

## ğŸ“– è¯¦ç»†æŒ‡å—

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| `GCPå¿«é€Ÿé…ç½®.md` | GCP è´¦å·é…ç½®æ­¥éª¤ |
| `éƒ¨ç½²åˆ°CloudRunæŒ‡å—.md` | å®Œæ•´éƒ¨ç½²æµç¨‹å’Œå‘½ä»¤ |
| `DEPLOYMENT.md` | å¤šå¹³å°éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯” |

---

## ğŸŒ é…ç½®åŸŸå (éƒ¨ç½²å)

### 1ï¸âƒ£ åœ¨ Cloud Run ä¸­æ˜ å°„åŸŸå

```bash
gcloud run domain-mappings create \
  --service kol-system \
  --domain myshell.site \
  --region asia-east1
```

### 2ï¸âƒ£ é…ç½® DNS

Cloud Run ä¼šæä¾› DNS è®°å½•,åœ¨ Cloudflare æ·»åŠ :

**æ–¹å¼ 1: CNAME è®°å½•** (æ¨è)
```
ç±»å‹: CNAME
åç§°: @
ç›®æ ‡: ghs.googlehosted.com
ä»£ç†: ä»… DNS (å…³é—­æ©™è‰²äº‘æœµ)
```

**æ–¹å¼ 2: A è®°å½•**
```
ç±»å‹: A
åç§°: @
ç›®æ ‡: [Cloud Run æä¾›çš„ IP]
```

### 3ï¸âƒ£ ç­‰å¾… SSL è¯ä¹¦

é€šå¸¸éœ€è¦ 15-60 åˆ†é’Ÿè‡ªåŠ¨é…ç½® SSL è¯ä¹¦ã€‚

**æ£€æŸ¥çŠ¶æ€**:
```bash
gcloud run domain-mappings describe \
  --domain myshell.site \
  --region asia-east1
```

---

## ğŸ§ª æµ‹è¯•éƒ¨ç½²

### è·å–æœåŠ¡ URL

```bash
gcloud run services describe kol-system \
  --region asia-east1 \
  --format 'value(status.url)'
```

### æµ‹è¯• API

```bash
# å¥åº·æ£€æŸ¥
curl https://kol-system-xxxx.run.app/health

# åˆ›å»ºçŸ­é“¾æ¥
curl -X POST https://kol-system-xxxx.run.app/api/tracking-links \
  -H "Content-Type: application/json" \
  -d '{"creator_user_id":"test","task_id":"t-1","campaign_id":"c-1","target_url":"https://example.com"}'
```

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹å®æ—¶æ—¥å¿—

```bash
gcloud run services logs read kol-system \
  --region asia-east1 \
  --follow
```

### æŸ¥çœ‹æœ€è¿‘æ—¥å¿—

```bash
gcloud run services logs read kol-system \
  --region asia-east1 \
  --limit 100
```

### è®¿é—®æ§åˆ¶å°

- **Cloud Run æ§åˆ¶å°**: https://console.cloud.google.com/run
- **æ—¥å¿—æŸ¥çœ‹å™¨**: https://console.cloud.google.com/logs
- **ç›‘æ§æŒ‡æ ‡**: åœ¨ Cloud Run æ§åˆ¶å° â†’ é€‰æ‹©æœåŠ¡ â†’ æŒ‡æ ‡

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### æ–¹æ³• 1: é‡æ–°è¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
deploy-cloudrun.bat
```

### æ–¹æ³• 2: æ‰‹åŠ¨æ›´æ–°

```bash
# 1. æ¨é€ä»£ç åˆ° GitHub
git push origin main

# 2. é‡æ–°æ„å»ºé•œåƒ
gcloud builds submit --tag gcr.io/myshell-kol-123456/kol-system

# 3. æ›´æ–°æœåŠ¡
gcloud run deploy kol-system \
  --image gcr.io/myshell-kol-123456/kol-system \
  --region asia-east1
```

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### å…è´¹é¢åº¦ (æ¯æœˆ)
- âœ… 2,000,000 æ¬¡è¯·æ±‚
- âœ… 360,000 GB-ç§’
- âœ… 180,000 vCPU-ç§’

### é¢„ä¼°è´¹ç”¨
- **å°æµé‡**: $0 - $2/æœˆ (å®Œå…¨åœ¨å…è´¹é¢åº¦å†…)
- **ä¸­ç­‰æµé‡**: $5 - $15/æœˆ
- **å¤§æµé‡**: $15 - $50/æœˆ

### ç›‘æ§è´¹ç”¨

è®¿é—®: https://console.cloud.google.com/billing

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: gcloud å‘½ä»¤æ‰¾ä¸åˆ°

**è§£å†³**: é‡å¯ç»ˆç«¯æˆ–å°† Cloud SDK æ·»åŠ åˆ° PATH

### é—®é¢˜ 2: æƒé™ä¸è¶³

**è§£å†³**: ç¡®ä¿ä½ çš„è´¦å·æ˜¯é¡¹ç›®æ‰€æœ‰è€…æˆ–ç¼–è¾‘è€…

### é—®é¢˜ 3: éƒ¨ç½²è¶…æ—¶

**è§£å†³**:
```bash
gcloud run deploy kol-system \
  --timeout 300s \
  --memory 1Gi
```

### é—®é¢˜ 4: åŸŸåé…ç½®å¤±è´¥

**è§£å†³**:
1. æ£€æŸ¥ DNS è®°å½•æ˜¯å¦æ­£ç¡®
2. ç­‰å¾… DNS ä¼ æ’­ (æœ€å¤š 48 å°æ—¶)
3. ä½¿ç”¨ `nslookup myshell.site` éªŒè¯

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

**éƒ¨ç½²å‰**:
- [ ] å®‰è£… gcloud CLI
- [ ] åˆ›å»º GCP é¡¹ç›®
- [ ] å¯ç”¨ç»“ç®—è´¦æˆ·
- [ ] å¯ç”¨å¿…è¦ API

**éƒ¨ç½²ä¸­**:
- [ ] è¿è¡Œéƒ¨ç½²è„šæœ¬
- [ ] æ„å»ºæˆåŠŸ
- [ ] éƒ¨ç½²æˆåŠŸ
- [ ] è·å–æœåŠ¡ URL

**éƒ¨ç½²å**:
- [ ] æµ‹è¯•å¥åº·æ£€æŸ¥
- [ ] æµ‹è¯• API åŠŸèƒ½
- [ ] é…ç½®è‡ªå®šä¹‰åŸŸå
- [ ] é…ç½® SSL è¯ä¹¦
- [ ] è®¾ç½®ç›‘æ§å‘Šè­¦

---

## ğŸ“ è·å–å¸®åŠ©

- **è¯¦ç»†éƒ¨ç½²æŒ‡å—**: `éƒ¨ç½²åˆ°CloudRunæŒ‡å—.md`
- **GCP é…ç½®**: `GCPå¿«é€Ÿé…ç½®.md`
- **å®˜æ–¹æ–‡æ¡£**: https://cloud.google.com/run/docs
- **GitHub Issues**: https://github.com/Arxchibobo/kol-system/issues

---

## ğŸ‰ éƒ¨ç½²æˆåŠŸå

ä½ çš„æœåŠ¡å°†åœ¨ä»¥ä¸‹åœ°å€å¯ç”¨:

1. **ä¸´æ—¶ URL**: `https://kol-system-xxxx.run.app`
2. **è‡ªå®šä¹‰åŸŸå**: `https://myshell.site` (é…ç½®å)

æ‰€æœ‰çŸ­é“¾æ¥åŠŸèƒ½å°†æ­£å¸¸å·¥ä½œ:
- çŸ­é“¾æ¥ç”Ÿæˆ: `https://myshell.site/abc123`
- è‡ªåŠ¨è·³è½¬å’Œè¿½è¸ª
- ç‚¹å‡»ç»Ÿè®¡
- è¾¾äººç®¡ç†

---

**å‡†å¤‡å¥½äº†å—?** è¿è¡Œ `deploy-cloudrun.bat` å¼€å§‹éƒ¨ç½²!
